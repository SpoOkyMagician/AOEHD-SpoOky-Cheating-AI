; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; (Priority 6) - Training Units
; Description: Train villagers, soldiers, siege, etc.
; Note: This is for a balanced AI. Feel free to experiment with this if you wish. However, I am going to stick with this.
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: Let's go ahead and get villager production out of the way first. It's pretty important.
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total villager <= 9)
	(current-age <= feudal-age)
	(can-train villager)
	=>
	(train villager)
)

(defrule
	(unit-type-count-total villager <= 24)
	(current-age == castle-age)
	(can-train villager)
	=>
	(train villager)
)

(defrule
	(unit-type-count-total villager <= 49)
	(current-age >= imperial-age)
	(can-train villager)
	=>
	(train villager)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: Dark Age
; Note: There is very little to train in this age so...
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total militiaman-line < 450)
	(current-age == dark-age)
	(can-train militiaman-line)
	=>
	(train militiaman-line)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: Feudal Age
; Note: Let's get a balance of units out.
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total militiaman-line < 150)
	(current-age == feudal-age)
	(can-train militiaman-line)
	=>
	(train militiaman-line)
)

(defrule
	(unit-type-count-total archer-line < 150)
	(current-age == feudal-age)
	(can-train archer-line)
	=>
	(train archer-line)
)

(defrule
	(unit-type-count-total scout-cavalry-line < 150)
	(current-age == feudal-age)
	(can-train scout-cavalry-line)
	=>
	(train scout-cavalry-line)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: Castle Age
; Note: Gonna balance it out a bit more...
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total battering-ram-line < 45)
	(current-age == castle-age)
	(can-train battering-ram-line)
	=>
	(train battering-ram-line)
)

(defrule
	(unit-type-count-total mangonel-line < 45)
	(current-age == castle-age)
	(can-train mangonel-line)
	=>
	(train mangonel-line)
)

(defrule
	(unit-type-count-total scorpion-line < 45)
	(current-age == castle-age)
	(can-train scorpion-line)
	=>
	(train scorpion-line)
)

(defrule
	(unit-type-count-total militiaman-line < 45)
	(current-age == castle-age)
	(can-train militiaman-line)
	=>
	(train militiaman-line)
)

(defrule
	(unit-type-count-total spearman-line < 45)
	(current-age == castle-age)
	(can-train spearman-line)
	=>
	(train spearman-line)
)

(defrule
	(unit-type-count-total archer-line < 45)
	(current-age == castle-age)
	(can-train archer-line)
	=>
	(train archer-line)
)

(defrule
	(unit-type-count-total skirmisher-line < 45)
	(current-age <= castle-age)
	(can-train skirmisher-line)
	=>
	(train skirmisher-line)
)

(defrule
	(unit-type-count-total cavalry-archer-line < 45)
	(current-age == castle-age)
	(can-train cavalry-archer-line)
	=>
	(train cavalry-archer-line)
)

(defrule
	(unit-type-count-total scout-cavalry-line < 45)
	(current-age == castle-age)
	(can-train scout-cavalry-line)
	=>
	(train scout-cavalry-line)
)

(defrule
	(unit-type-count-total knight-line < 45)
	(current-age == castle-age)
	(can-train knight-line)
	=>
	(train knight-line)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: This is the unit creation loop. This is important. Once in imperial, start doing this from now on.
; Let's try to organize this create/counter unit stuff... infantry, archers, cavalry, siege, and finally buildings...
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: + INFANTRY
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: + INFANTRY - MILITIA
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total militiaman-line < 20)
	(current-age >= imperial-age)
	(can-train militiaman-line)
	=>
	(train militiaman-line)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: Let's counter!
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total militiaman-line < 40)
	(current-age >= imperial-age)
	(can-train militiaman-line)
	(players-unit-type-count any-enemy spearman-line >= 10)
	=>
	(train militiaman-line)
)

(defrule
	(unit-type-count-total militiaman-line < 40)
	(current-age >= imperial-age)
	(can-train militiaman-line)
	(players-unit-type-count any-enemy woad-raider >= 10)
	=>
	(train militiaman-line)
)

(defrule
	(unit-type-count-total militiaman-line < 40)
	(current-age >= imperial-age)
	(can-train militiaman-line)
	(players-unit-type-count any-enemy elite-woad-raider >= 10)
	=>
	(train militiaman-line)
)

(defrule
	(unit-type-count-total militiaman-line < 40)
	(current-age >= imperial-age)
	(can-train militiaman-line)
	(players-unit-type-count any-enemy huskarl >= 10)
	=>
	(train militiaman-line)
)

(defrule
	(unit-type-count-total militiaman-line < 40)
	(current-age >= imperial-age)
	(can-train militiaman-line)
	(players-unit-type-count any-enemy elite-huskarl >= 10)
	=>
	(train militiaman-line)
)

(defrule
	(unit-type-count-total militiaman-line < 40)
	(current-age >= imperial-age)
	(can-train militiaman-line)
	(players-unit-type-count any-enemy samurai >= 10)
	=>
	(train militiaman-line)
)

(defrule
	(unit-type-count-total militiaman-line < 40)
	(current-age >= imperial-age)
	(can-train militiaman-line)
	(players-unit-type-count any-enemy elite-samurai >= 10)
	=>
	(train militiaman-line)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: + INFANTRY - SPEARMAN
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total spearman-line < 20)
	(current-age >= imperial-age)
	(can-train spearman-line)
	=>
	(train spearman-line)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: Let's counter!
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total spearman-line < 40)
	(current-age >= imperial-age)
	(can-train spearman-line)
	(players-unit-type-count any-enemy scout-cavalry-line >= 10)
	=>
	(train spearman-line)
)

(defrule
	(unit-type-count-total spearman-line < 40)
	(current-age >= imperial-age)
	(can-train spearman-line)
	(players-unit-type-count any-enemy knight-line >= 10)
	=>
	(train spearman-line)
)

(defrule
	(unit-type-count-total spearman-line < 40)
	(current-age >= imperial-age)
	(can-train spearman-line)
	(players-unit-type-count any-enemy cataphract >= 10)
	=>
	(train spearman-line)
)

(defrule
	(unit-type-count-total spearman-line < 40)
	(current-age >= imperial-age)
	(can-train spearman-line)
	(players-unit-type-count any-enemy elite-cataphract >= 10)
	=>
	(train spearman-line)
)

(defrule
	(unit-type-count-total spearman-line < 40)
	(current-age >= imperial-age)
	(can-train spearman-line)
	(players-unit-type-count any-enemy tarkan >= 10)
	=>
	(train spearman-line)
)

(defrule
	(unit-type-count-total spearman-line < 40)
	(current-age >= imperial-age)
	(can-train spearman-line)
	(players-unit-type-count any-enemy elite-tarkan >= 10)
	=>
	(train spearman-line)
)

(defrule
	(unit-type-count-total spearman-line < 40)
	(current-age >= imperial-age)
	(can-train spearman-line)
	(players-unit-type-count any-enemy mameluke >= 10)
	=>
	(train spearman-line)
)

(defrule
	(unit-type-count-total spearman-line < 40)
	(current-age >= imperial-age)
	(can-train spearman-line)
	(players-unit-type-count any-enemy elite-mameluke >= 10)
	=>
	(train spearman-line)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: + INFANTRY - EAGLE WARRIOR
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total eagle-warrior-line < 20)
	(current-age >= imperial-age)
	(can-train eagle-warrior-line)
	=>
	(train eagle-warrior-line)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: Let's counter!
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total eagle-warrior-line < 40)
	(current-age >= imperial-age)
	(can-train eagle-warrior-line)
	(players-unit-type-count any-enemy monk >= 10)
	=>
	(train eagle-warrior-line)
)

(defrule
	(unit-type-count-total eagle-warrior-line < 40)
	(current-age >= imperial-age)
	(can-train eagle-warrior-line)
	(players-unit-type-count any-enemy missionary >= 10)
	=>
	(train eagle-warrior-line)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: + ARCHERS
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: + ARCHERS - ARCHER
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total archer-line < 20)
	(current-age >= imperial-age)
	(can-train archer-line)
	=>
	(train archer-line)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: Let's counter!
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total archer-line < 40)
	(current-age >= imperial-age)
	(can-train archer-line)
	(players-unit-type-count any-enemy militiaman-line >= 10)
	=>
	(train archer-line)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: jaguar-warrior is 725. (AI is bugged.)
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total archer-line < 40)
	(current-age >= imperial-age)
	(can-train archer-line)
	(players-unit-type-count any-enemy 725 >= 10)
	=>
	(train archer-line)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: jaguar-warrior is 726. (AI is bugged.)
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total archer-line < 40)
	(current-age >= imperial-age)
	(can-train archer-line)
	(players-unit-type-count any-enemy 726 >= 10)
	=>
	(train archer-line)
)

(defrule
	(unit-type-count-total archer-line < 40)
	(current-age >= imperial-age)
	(can-train archer-line)
	(players-unit-type-count any-enemy throwing-axeman >= 10)
	=>
	(train archer-line)
)

(defrule
	(unit-type-count-total archer-line < 40)
	(current-age >= imperial-age)
	(can-train archer-line)
	(players-unit-type-count any-enemy elite-throwing-axeman >= 10)
	=>
	(train archer-line)
)

(defrule
	(unit-type-count-total archer-line < 40)
	(current-age >= imperial-age)
	(can-train archer-line)
	(players-unit-type-count any-enemy berserk >= 10)
	=>
	(train archer-line)
)

(defrule
	(unit-type-count-total archer-line < 40)
	(current-age >= imperial-age)
	(can-train archer-line)
	(players-unit-type-count any-enemy elite-berserk >= 10)
	=>
	(train archer-line)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: + ARCHERS - SKIRMISHER
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total skirmisher-line < 20)
	(current-age >= imperial-age)
	(can-train skirmisher-line)
	=>
	(train skirmisher-line)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: Let's counter!
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total skirmisher-line < 40)
	(current-age >= imperial-age)
	(can-train skirmisher-line)
	(players-unit-type-count any-enemy archer-line >= 10)
	=>
	(train skirmisher-line)
)

(defrule
	(unit-type-count-total skirmisher-line < 40)
	(current-age >= imperial-age)
	(can-train skirmisher-line)
	(players-unit-type-count any-enemy cavalry-archer-line >= 10)
	=>
	(train skirmisher-line)
)

(defrule
	(unit-type-count-total skirmisher-line < 40)
	(current-age >= imperial-age)
	(can-train skirmisher-line)
	(players-unit-type-count any-enemy hand-cannoneer >= 10)
	=>
	(train skirmisher-line)
)

(defrule
	(unit-type-count-total skirmisher-line < 40)
	(current-age >= imperial-age)
	(can-train skirmisher-line)
	(players-unit-type-count any-enemy mangudai >= 10)
	=>
	(train skirmisher-line)
)

(defrule
	(unit-type-count-total skirmisher-line < 40)
	(current-age >= imperial-age)
	(can-train skirmisher-line)
	(players-unit-type-count any-enemy elite-mangudai >= 10)
	=>
	(train skirmisher-line)
)

(defrule
	(unit-type-count-total skirmisher-line < 40)
	(current-age >= imperial-age)
	(can-train skirmisher-line)
	(players-unit-type-count any-enemy conquistador >= 10)
	=>
	(train skirmisher-line)
)

(defrule
	(unit-type-count-total skirmisher-line < 40)
	(current-age >= imperial-age)
	(can-train skirmisher-line)
	(players-unit-type-count any-enemy elite-conquistador >= 10)
	=>
	(train skirmisher-line)
)

(defrule
	(unit-type-count-total skirmisher-line < 40)
	(current-age >= imperial-age)
	(can-train skirmisher-line)
	(players-unit-type-count any-enemy janissary >= 10)
	=>
	(train skirmisher-line)
)

(defrule
	(unit-type-count-total skirmisher-line < 40)
	(current-age >= imperial-age)
	(can-train skirmisher-line)
	(players-unit-type-count any-enemy elite-janissary >= 10)
	=>
	(train skirmisher-line)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: + ARCHERS - CAVALRY ARCHER
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total cavalry-archer-line < 20)
	(current-age >= imperial-age)
	(can-train cavalry-archer-line)
	=>
	(train cavalry-archer-line)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: Let's counter!
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total cavalry-archer-line < 40)
	(current-age >= imperial-age)
	(can-train cavalry-archer-line)
	(players-unit-type-count any-enemy militiaman-line >= 10)
	=>
	(train cavalry-archer-line)
)

(defrule
	(unit-type-count-total cavalry-archer-line < 40)
	(current-age >= imperial-age)
	(can-train cavalry-archer-line)
	(players-unit-type-count any-enemy teutonic-knight >= 10)
	=>
	(train cavalry-archer-line)
)

(defrule
	(unit-type-count-total cavalry-archer-line < 40)
	(current-age >= imperial-age)
	(can-train cavalry-archer-line)
	(players-unit-type-count any-enemy elite-teutonic-knight >= 10)
	=>
	(train cavalry-archer-line)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: + ARCHERS - HAND CANNONEER
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total hand-cannoneer < 20)
	(current-age >= imperial-age)
	(can-train hand-cannoneer)
	=>
	(train hand-cannoneer)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: Let's counter!
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total hand-cannoneer < 40)
	(current-age >= imperial-age)
	(can-train hand-cannoneer)
	(players-unit-type-count any-enemy militiaman-line >= 10)
	=>
	(train hand-cannoneer)
)

(defrule
	(unit-type-count-total hand-cannoneer < 40)
	(current-age >= imperial-age)
	(can-train hand-cannoneer)
	(players-unit-type-count any-enemy scout-cavalry-line >= 10)
	=>
	(train hand-cannoneer)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: + CAVALRY
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: + CAVALRY - SCOUT CAVALRY
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total scout-cavalry-line < 20)
	(current-age >= imperial-age)
	(can-train scout-cavalry-line)
	=>
	(train scout-cavalry-line)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Let's counter!
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total scout-cavalry-line < 40)
	(current-age >= imperial-age)
	(can-train scout-cavalry-line)
	(players-unit-type-count any-enemy skirmisher-line >= 10)
	=>
	(train scout-cavalry-line)
)

(defrule
	(unit-type-count-total scout-cavalry-line < 40)
	(current-age >= imperial-age)
	(can-train scout-cavalry-line)
	(players-unit-type-count any-enemy monk >= 10)
	=>
	(train scout-cavalry-line)
)

(defrule
	(unit-type-count-total scout-cavalry-line < 40)
	(current-age >= imperial-age)
	(can-train scout-cavalry-line)
	(players-unit-type-count any-enemy missionary >= 10)
	=>
	(train scout-cavalry-line)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: + CAVALRY - KNIGHT
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total knight-line < 20)
	(current-age >= imperial-age)
	(can-train knight-line)
	=>
	(train knight-line)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: Let's counter!
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total knight-line < 40)
	(current-age >= imperial-age)
	(can-train knight-line)
	(players-unit-type-count any-enemy archer-line >= 10)
	=>
	(train knight-line)
)

(defrule
	(unit-type-count-total knight-line < 40)
	(current-age >= imperial-age)
	(can-train knight-line)
	(players-unit-type-count any-enemy skirmisher-line >= 10)
	=>
	(train knight-line)
)

(defrule
	(unit-type-count-total knight-line < 40)
	(current-age >= imperial-age)
	(can-train knight-line)
	(players-unit-type-count any-enemy monk >= 10)
	=>
	(train knight-line)
)

(defrule
	(unit-type-count-total knight-line < 40)
	(current-age >= imperial-age)
	(can-train knight-line)
	(players-unit-type-count any-enemy missionary >= 10)
	=>
	(train knight-line)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: + CAVALRY - CAMEL
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total camel-line < 20)
	(current-age >= imperial-age)
	(can-train camel-line)
	=>
	(train camel-line)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: Let's counter!
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total camel-line < 40)
	(current-age >= imperial-age)
	(can-train camel-line)
	(players-unit-type-count any-enemy scout-cavalry-line >= 10)
	=>
	(train camel-line)
)

(defrule
	(unit-type-count-total camel-line < 40)
	(current-age >= imperial-age)
	(can-train camel-line)
	(players-unit-type-count any-enemy knight-line >= 10)
	=>
	(train camel-line)
)

(defrule
	(unit-type-count-total camel-line < 40)
	(current-age >= imperial-age)
	(can-train camel-line)
	(players-unit-type-count any-enemy camel-line >= 10)
	=>
	(train camel-line)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: + MONKS
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: + MONKS - MONK
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total monk < 20)
	(current-age >= imperial-age)
	(can-train monk)
	=>
	(train monk)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: Let's counter!
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total monk < 40)
	(current-age >= imperial-age)
	(can-train monk)
	(players-unit-type-count any-enemy militiaman-line >= 10)
	=>
	(train monk)
)

(defrule
	(unit-type-count-total monk < 40)
	(current-age >= imperial-age)
	(can-train monk)
	(players-unit-type-count any-enemy war-elephant >= 10)
	=>
	(train monk)
)

(defrule
	(unit-type-count-total monk < 40)
	(current-age >= imperial-age)
	(can-train monk)
	(players-unit-type-count any-enemy elite-war-elephant >= 10)
	=>
	(train monk)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: + MONKS - MISSIONARY
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total missionary < 20)
	(current-age >= imperial-age)
	(can-train missionary)
	=>
	(train missionary)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: Let's counter!
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total missionary < 40)
	(current-age >= imperial-age)
	(can-train missionary)
	(players-unit-type-count any-enemy militiaman-line >= 10)
	=>
	(train missionary)
)

(defrule
	(unit-type-count-total missionary < 40)
	(current-age >= imperial-age)
	(can-train missionary)
	(players-unit-type-count any-enemy war-elephant >= 10)
	=>
	(train missionary)
)

(defrule
	(unit-type-count-total missionary < 40)
	(current-age >= imperial-age)
	(can-train missionary)
	(players-unit-type-count any-enemy elite-war-elephant >= 10)
	=>
	(train missionary)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: + SIEGE
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: + SIEGE - RAM
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total battering-ram-line < 20)
	(current-age >= imperial-age)
	(can-train battering-ram-line)
	=>
	(train battering-ram-line)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: Let's counter!
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total battering-ram-line < 40)
	(current-age >= imperial-age)
	(can-train bombard-cannon)
	(players-building-type-count any-enemy watch-tower-line >= 1)
	=>
	(train battering-ram-line)
)

(defrule
	(unit-type-count-total battering-ram-line < 40)
	(current-age >= imperial-age)
	(can-train bombard-cannon)
	(players-building-type-count any-enemy bombard-tower >= 1)
	=>
	(train battering-ram-line)
)

(defrule
	(unit-type-count-total battering-ram-line < 40)
	(current-age >= imperial-age)
	(can-train bombard-cannon)
	(players-building-type-count any-enemy castle >= 1)
	=>
	(train battering-ram-line)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: + SIEGE - MANGONEL
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total mangonel-line < 20)
	(current-age >= imperial-age)
	(can-train mangonel-line)
	=>
	(train mangonel-line)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: Let's counter!
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total mangonel-line < 40)
	(current-age >= imperial-age)
	(can-train mangonel-line)
	(players-unit-type-count any-enemy archer-line >= 10)
	=>
	(train mangonel-line)
)

(defrule
	(unit-type-count-total mangonel-line < 40)
	(current-age >= imperial-age)
	(can-train mangonel-line)
	(players-unit-type-count any-enemy skirmisher-line >= 10)
	=>
	(train mangonel-line)
)

(defrule
	(unit-type-count-total mangonel-line < 40)
	(current-age >= imperial-age)
	(can-train mangonel-line)
	(players-unit-type-count any-enemy hand-cannoneer >= 10)
	=>
	(train mangonel-line)
)

(defrule
	(unit-type-count-total mangonel-line < 40)
	(current-age >= imperial-age)
	(can-train mangonel-line)
	(players-unit-type-count any-enemy militiaman-line >= 10)
	=>
	(train mangonel-line)
)

(defrule
	(unit-type-count-total mangonel-line < 40)
	(current-age >= imperial-age)
	(can-train mangonel-line)
	(players-unit-type-count any-enemy spearman-line >= 10)
	=>
	(train mangonel-line)
)

(defrule
	(unit-type-count-total mangonel-line < 40)
	(current-age >= imperial-age)
	(can-train mangonel-line)
	(players-unit-type-count any-enemy longbowman >= 10)
	=>
	(train mangonel-line)
)

(defrule
	(unit-type-count-total mangonel-line < 40)
	(current-age >= imperial-age)
	(can-train mangonel-line)
	(players-unit-type-count any-enemy elite-longbowman >= 10)
	=>
	(train mangonel-line)
)

(defrule
	(unit-type-count-total mangonel-line < 40)
	(current-age >= imperial-age)
	(can-train mangonel-line)
	(players-unit-type-count any-enemy chu-ko-nu >= 10)
	=>
	(train mangonel-line)
)

(defrule
	(unit-type-count-total mangonel-line < 40)
	(current-age >= imperial-age)
	(can-train mangonel-line)
	(players-unit-type-count any-enemy elite-chu-ko-nu >= 10)
	=>
	(train mangonel-line)
)

(defrule
	(unit-type-count-total mangonel-line < 40)
	(current-age >= imperial-age)
	(can-train mangonel-line)
	(players-unit-type-count any-enemy war-wagon >= 10)
	=>
	(train mangonel-line)
)

(defrule
	(unit-type-count-total mangonel-line < 40)
	(current-age >= imperial-age)
	(can-train mangonel-line)
	(players-unit-type-count any-enemy elite-war-wagon >= 10)
	=>
	(train mangonel-line)
)

(defrule
	(unit-type-count-total mangonel-line < 40)
	(current-age >= imperial-age)
	(can-train mangonel-line)
	(players-unit-type-count any-enemy plumed-archer >= 10)
	=>
	(train mangonel-line)
)

(defrule
	(unit-type-count-total mangonel-line < 40)
	(current-age >= imperial-age)
	(can-train mangonel-line)
	(players-unit-type-count any-enemy elite-plumed-archer >= 10)
	=>
	(train mangonel-line)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: + SIEGE - SCORPION
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total scorpion-line < 20)
	(current-age >= imperial-age)
	(can-train scorpion-line)
	=>
	(train scorpion-line)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: Let's counter!
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


(defrule
	(unit-type-count-total scorpion-line < 40)
	(current-age >= imperial-age)
	(can-train scorpion-line)
	(players-unit-type-count any-enemy militiaman-line >= 10)
	=>
	(train scorpion-line)
)

(defrule
	(unit-type-count-total scorpion-line < 40)
	(current-age >= imperial-age)
	(can-train scorpion-line)
	(players-unit-type-count any-enemy spearman-line >= 10)
	=>
	(train scorpion-line)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: + SIEGE - BOMBARD CANNON
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total bombard-cannon < 20)
	(current-age >= imperial-age)
	(can-train bombard-cannon)
	=>
	(train bombard-cannon)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: Let's counter!
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total bombard-cannon < 40)
	(current-age >= imperial-age)
	(can-train bombard-cannon)
	(players-building-type-count any-enemy watch-tower-line >= 1)
	=>
	(train bombard-cannon)
)

(defrule
	(unit-type-count-total bombard-cannon < 40)
	(current-age >= imperial-age)
	(can-train bombard-cannon)
	(players-building-type-count any-enemy bombard-tower >= 1)
	=>
	(train bombard-cannon)
)

(defrule
	(unit-type-count-total bombard-cannon < 40)
	(current-age >= imperial-age)
	(can-train bombard-cannon)
	(players-building-type-count any-enemy castle >= 1)
	=>
	(train bombard-cannon)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: + SIEGE - PETARD
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: Only make a few of these or they will be created forever...
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total petard < 5)
	(can-train petard)
	=>
	(train petard)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: These are bugged... Packed/Unpacked are different units so count is not calculated correctly... Use these carefully... 42 is the packed trebuchet.
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total trebuchet < 5)
	(unit-type-count-total 42 < 5)
	(current-age >= imperial-age)
	(can-train trebuchet)
	=>
	(train trebuchet)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: Let's Counter!
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total trebuchet < 10)
	(unit-type-count-total 42 < 10)
	(current-age >= imperial-age)
	(can-train trebuchet)
	(players-building-type-count any-enemy wonder >= 1)
	=>
	(train trebuchet)
)

(defrule
	(unit-type-count-total trebuchet < 10)
	(unit-type-count-total 42 < 10)
	(current-age >= imperial-age)
	(can-train trebuchet)
	(players-building-type-count any-enemy watch-tower-line >= 1)
	=>
	(train trebuchet)
)

(defrule
	(unit-type-count-total trebuchet < 10)
	(unit-type-count-total 42 < 10)
	(current-age >= imperial-age)
	(can-train trebuchet)
	(players-building-type-count any-enemy bombard-tower >= 1)
	=>
	(train trebuchet)
)

(defrule
	(unit-type-count-total trebuchet < 10)
	(unit-type-count-total 42 < 10)
	(current-age >= imperial-age)
	(can-train trebuchet)
	(players-building-type-count any-enemy castle >= 1)
	=>
	(train trebuchet)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: Never forget to allow some of these!
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total my-unique-unit-line < 50)
	(can-train my-unique-unit-line)
	=>
	(train my-unique-unit-line)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: Aztec/Mayan are a bit underpowered without stables...
; Add a few extra units for them...
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

#load-if-defined AZTEC-CIV
(defrule
	(unit-type-count-total skirmisher-line < 100)
	(can-train skirmisher-line)
	=>
	(train skirmisher-line)
)

(defrule
	(unit-type-count-total eagle-warrior-line < 100)
	(can-train eagle-warrior-line)
	=>
	(train eagle-warrior-line)
)

(defrule
	(unit-type-count-total monk < 100)
	(current-age >= castle-age)
	(can-train monk)
	=>
	(train monk)
)
#end-if

#load-if-defined MAYAN-CIV
(defrule
	(unit-type-count-total skirmisher-line < 100)
	(can-train skirmisher-line)
	=>
	(train skirmisher-line)
)

(defrule
	(unit-type-count-total eagle-warrior-line < 100)
	(can-train eagle-warrior-line)
	=>
	(train eagle-warrior-line)
)

(defrule
	(unit-type-count-total monk < 100)
	(current-age >= castle-age)
	(can-train monk)
	=>
	(train monk)
)
#end-if