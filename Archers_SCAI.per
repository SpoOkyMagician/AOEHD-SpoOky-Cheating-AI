; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; (Priority 6) - Training Units
; Description: Train villagers, soldiers, siege, etc.
; Note: This is for a balanced AI. Feel free to experiment with this if you wish. However, I am going to stick with this.
; Note: This is a modified version to create archer units only.
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: Dark Age
; Note: There is very little to train in this age so...
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: Feudal Age
; Note: Let's get a balance of units out.
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total archer-line < 225)
	(current-age == feudal-age)
	(can-train archer-line)
	=>
	(train archer-line)
)

(defrule
	(unit-type-count-total skirmisher-line < 225)
	(current-age == feudal-age)
	(can-train skirmisher-line)
	=>
	(train skirmisher-line)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: Castle Age
; Note: Gonna balance it out a bit more...
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total archer-line < 150)
	(current-age == feudal-age)
	(can-train archer-line)
	=>
	(train archer-line)
)

(defrule
	(unit-type-count-total skirmisher-line < 150)
	(current-age == feudal-age)
	(can-train skirmisher-line)
	=>
	(train skirmisher-line)
)

(defrule
	(unit-type-count-total cavalry-archer-line < 150)
	(current-age == castle-age)
	(can-train cavalry-archer-line)
	=>
	(train cavalry-archer-line)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: This is the unit creation loop. This is important. Once in imperial, start doing this from now on.
; Let's try to organize this create/counter unit stuff... infantry, archers, cavalry, siege, and finally buildings...
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: + ARCHERS
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: + ARCHERS - ARCHER
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total archer-line < 100)
	(current-age >= imperial-age)
	(can-train archer-line)
	=>
	(train archer-line)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: Let's counter!
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total archer-line < 40)
	(current-age >= imperial-age)
	(can-train archer-line)
	(players-unit-type-count any-enemy militiaman-line >= 10)
	=>
	(train archer-line)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: jaguar-warrior is 725. (AI is bugged.)
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total archer-line < 40)
	(current-age >= imperial-age)
	(can-train archer-line)
	(players-unit-type-count any-enemy 725 >= 10)
	=>
	(train archer-line)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: jaguar-warrior is 726. (AI is bugged.)
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total archer-line < 40)
	(current-age >= imperial-age)
	(can-train archer-line)
	(players-unit-type-count any-enemy 726 >= 10)
	=>
	(train archer-line)
)

(defrule
	(unit-type-count-total archer-line < 40)
	(current-age >= imperial-age)
	(can-train archer-line)
	(players-unit-type-count any-enemy throwing-axeman >= 10)
	=>
	(train archer-line)
)

(defrule
	(unit-type-count-total archer-line < 40)
	(current-age >= imperial-age)
	(can-train archer-line)
	(players-unit-type-count any-enemy elite-throwing-axeman >= 10)
	=>
	(train archer-line)
)

(defrule
	(unit-type-count-total archer-line < 40)
	(current-age >= imperial-age)
	(can-train archer-line)
	(players-unit-type-count any-enemy berserk >= 10)
	=>
	(train archer-line)
)

(defrule
	(unit-type-count-total archer-line < 40)
	(current-age >= imperial-age)
	(can-train archer-line)
	(players-unit-type-count any-enemy elite-berserk >= 10)
	=>
	(train archer-line)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: + ARCHERS - SKIRMISHER
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total skirmisher-line < 100)
	(current-age >= imperial-age)
	(can-train skirmisher-line)
	=>
	(train skirmisher-line)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: Let's counter!
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total skirmisher-line < 40)
	(current-age >= imperial-age)
	(can-train skirmisher-line)
	(players-unit-type-count any-enemy archer-line >= 10)
	=>
	(train skirmisher-line)
)

(defrule
	(unit-type-count-total skirmisher-line < 40)
	(current-age >= imperial-age)
	(can-train skirmisher-line)
	(players-unit-type-count any-enemy cavalry-archer-line >= 10)
	=>
	(train skirmisher-line)
)

(defrule
	(unit-type-count-total skirmisher-line < 40)
	(current-age >= imperial-age)
	(can-train skirmisher-line)
	(players-unit-type-count any-enemy hand-cannoneer >= 10)
	=>
	(train skirmisher-line)
)

(defrule
	(unit-type-count-total skirmisher-line < 40)
	(current-age >= imperial-age)
	(can-train skirmisher-line)
	(players-unit-type-count any-enemy mangudai >= 10)
	=>
	(train skirmisher-line)
)

(defrule
	(unit-type-count-total skirmisher-line < 40)
	(current-age >= imperial-age)
	(can-train skirmisher-line)
	(players-unit-type-count any-enemy elite-mangudai >= 10)
	=>
	(train skirmisher-line)
)

(defrule
	(unit-type-count-total skirmisher-line < 40)
	(current-age >= imperial-age)
	(can-train skirmisher-line)
	(players-unit-type-count any-enemy conquistador >= 10)
	=>
	(train skirmisher-line)
)

(defrule
	(unit-type-count-total skirmisher-line < 40)
	(current-age >= imperial-age)
	(can-train skirmisher-line)
	(players-unit-type-count any-enemy elite-conquistador >= 10)
	=>
	(train skirmisher-line)
)

(defrule
	(unit-type-count-total skirmisher-line < 40)
	(current-age >= imperial-age)
	(can-train skirmisher-line)
	(players-unit-type-count any-enemy janissary >= 10)
	=>
	(train skirmisher-line)
)

(defrule
	(unit-type-count-total skirmisher-line < 40)
	(current-age >= imperial-age)
	(can-train skirmisher-line)
	(players-unit-type-count any-enemy elite-janissary >= 10)
	=>
	(train skirmisher-line)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: + ARCHERS - CAVALRY ARCHER
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total cavalry-archer-line < 100)
	(current-age >= imperial-age)
	(can-train cavalry-archer-line)
	=>
	(train cavalry-archer-line)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: Let's counter!
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total cavalry-archer-line < 40)
	(current-age >= imperial-age)
	(can-train cavalry-archer-line)
	(players-unit-type-count any-enemy militiaman-line >= 10)
	=>
	(train cavalry-archer-line)
)

(defrule
	(unit-type-count-total cavalry-archer-line < 40)
	(current-age >= imperial-age)
	(can-train cavalry-archer-line)
	(players-unit-type-count any-enemy teutonic-knight >= 10)
	=>
	(train cavalry-archer-line)
)

(defrule
	(unit-type-count-total cavalry-archer-line < 40)
	(current-age >= imperial-age)
	(can-train cavalry-archer-line)
	(players-unit-type-count any-enemy elite-teutonic-knight >= 10)
	=>
	(train cavalry-archer-line)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: + ARCHERS - HAND CANNONEER
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total hand-cannoneer < 100)
	(current-age >= imperial-age)
	(can-train hand-cannoneer)
	=>
	(train hand-cannoneer)
)

; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Note: Let's counter!
; ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

(defrule
	(unit-type-count-total hand-cannoneer < 40)
	(current-age >= imperial-age)
	(can-train hand-cannoneer)
	(players-unit-type-count any-enemy militiaman-line >= 10)
	=>
	(train hand-cannoneer)
)

(defrule
	(unit-type-count-total hand-cannoneer < 40)
	(current-age >= imperial-age)
	(can-train hand-cannoneer)
	(players-unit-type-count any-enemy scout-cavalry-line >= 10)
	=>
	(train hand-cannoneer)
)